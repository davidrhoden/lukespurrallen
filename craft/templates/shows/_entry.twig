{#
 #Shows entry template
 # -------------------
 #
 # See this page for more details on how Craft routes requests:
 # http://craftcms.com/docs/routing
 #}

{% extends "_layout" %}

{% block content %}
	<div class="show-block flex space-around">
		<div class="full-width">
			<h2>{{ entry.date | date("F d, Y")}}</h2>
			<hr>
		</div>
		<div class="third">
			<article>		
				<h1><a href="{{ entry.venue.first().website }}" target="_blank">{{ entry.venue.first() }}</a></h1>
				<h2>{{ entry.lineUp }}</h2>
				<p>{{ entry.time |date("g:i a") }}
				{% if entry.cover|length %}
					, {{ entry.cover }}
				{% endif %}
				</p>
				<p>{{ entry.body }}</p>
			</article>
		</div>
	    <div class="third">
            <div class="canvas-container flex center">
                <h1 class="poster-content"></h1>
                <canvas id="canvas"></canvas>
                <script>makeCanvas();</script>
                <script>
                var stS = "<span class='slabtext'>",
                    stE = "</span>",
                    txt = [
                        "{{ entry.lineUp | striptags }}",
                        "{{ entry.venue.first()}}",
                        "{{ entry.date | date("M d, Y") }}",
                        "{{ entry.time | date("g:i a") }}"];
                    $(".poster-content").html(stS + txt.join(stE + stS) + stE).slabText();
                </script>
            </div>
        </div>
	    <div class="third">
            {% for asset in entry.showArt %}
            <img class="albumart" src="{{ asset.getUrl('threeHundredTwentyPxWide') }}" alt="{{ entry.venue.first() }} {{ entry.lineUp|replace({'<p>': ' ', '</p>': ' '}) }} {{ entry.date | date(" M d, Y ") }}" /> {% endfor %}
        </div>
	</div>
{% endblock %}
